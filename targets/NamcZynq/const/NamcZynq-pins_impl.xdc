# -------------------------------------------------------------------
# Encoder IO
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# TTL and LVDS IO
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# External Clock Constraints
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Slow Controller SPI Interface)
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# FMC Differential Pins
# -------------------------------------------------------------------
set_property PACKAGE_PIN AD15   [get_ports {FMC_LA_N[3]   }];
set_property PACKAGE_PIN AD16   [get_ports {FMC_LA_P[3]   }];
set_property PACKAGE_PIN AF12   [get_ports {FMC_LA_N[8]   }];
set_property PACKAGE_PIN AE12   [get_ports {FMC_LA_P[8]   }];
set_property PACKAGE_PIN AK12   [get_ports {FMC_LA_N[12]  }];
set_property PACKAGE_PIN AK13   [get_ports {FMC_LA_P[12]  }];
set_property PACKAGE_PIN AK16   [get_ports {FMC_LA_N[16]  }];
set_property PACKAGE_PIN AJ16   [get_ports {FMC_LA_P[16]  }];
set_property PACKAGE_PIN AK18   [get_ports {FMC_LA_N[20]  }];
set_property PACKAGE_PIN AK17   [get_ports {FMC_LA_P[20]  }];
set_property PACKAGE_PIN AF17   [get_ports {FMC_LA_N[22]  }];
set_property PACKAGE_PIN AF18   [get_ports {FMC_LA_P[22]  }];
set_property PACKAGE_PIN AG14   [get_ports {FMC_LA_N[1]   }];
set_property PACKAGE_PIN AF14   [get_ports {FMC_LA_P[1]   }];
set_property PACKAGE_PIN AG25   [get_ports {FMC_LA_N[25]  }];
set_property PACKAGE_PIN AG24   [get_ports {FMC_LA_P[25]  }];
set_property PACKAGE_PIN AC23   [get_ports {FMC_LA_N[29]  }];
set_property PACKAGE_PIN AC22   [get_ports {FMC_LA_P[29]  }];
set_property PACKAGE_PIN AA23   [get_ports {FMC_LA_N[31]  }];
set_property PACKAGE_PIN AA22   [get_ports {FMC_LA_P[31]  }];
set_property PACKAGE_PIN Y23    [get_ports {FMC_LA_N[33]  }];
set_property PACKAGE_PIN Y22    [get_ports {FMC_LA_P[33]  }];
set_property PACKAGE_PIN AA14   [get_ports {FMC_LA_N[2]   }];
set_property PACKAGE_PIN AA15   [get_ports {FMC_LA_P[2]   }];
set_property PACKAGE_PIN AC12   [get_ports {FMC_LA_N[4]   }];
set_property PACKAGE_PIN AB12   [get_ports {FMC_LA_P[4]   }];
set_property PACKAGE_PIN AE17   [get_ports {FMC_LA_N[7]   }];
set_property PACKAGE_PIN AE18   [get_ports {FMC_LA_P[7]   }];
set_property PACKAGE_PIN AG19   [get_ports {FMC_LA_N[11]  }];
set_property PACKAGE_PIN AF19   [get_ports {FMC_LA_P[11]  }];
# error in the manual doc (AJ17) ?
set_property PACKAGE_PIN AJ18   [get_ports {FMC_LA_N[15]  }];
set_property PACKAGE_PIN AH18   [get_ports {FMC_LA_P[15]  }];
set_property PACKAGE_PIN AJ19   [get_ports {FMC_LA_N[19]  }];
set_property PACKAGE_PIN AH19   [get_ports {FMC_LA_P[19]  }];
set_property PACKAGE_PIN AG16   [get_ports {FMC_LA_N[0]   }];
set_property PACKAGE_PIN AG17   [get_ports {FMC_LA_P[0]   }];
set_property PACKAGE_PIN AE21   [get_ports {FMC_LA_N[21]  }];
set_property PACKAGE_PIN AD21   [get_ports {FMC_LA_P[21]  }];
set_property PACKAGE_PIN AF24   [get_ports {FMC_LA_N[24]  }];
set_property PACKAGE_PIN AF23   [get_ports {FMC_LA_P[24]  }];
set_property PACKAGE_PIN AD24   [get_ports {FMC_LA_N[28]  }];
set_property PACKAGE_PIN AC24   [get_ports {FMC_LA_P[28]  }];
set_property PACKAGE_PIN AB24   [get_ports {FMC_LA_N[30]  }];
set_property PACKAGE_PIN AA24   [get_ports {FMC_LA_P[30]  }];
set_property PACKAGE_PIN Y21    [get_ports {FMC_LA_N[32]  }];
set_property PACKAGE_PIN W21    [get_ports {FMC_LA_P[32]  }];
set_property PACKAGE_PIN AE15   [get_ports {FMC_LA_N[5]   }];
set_property PACKAGE_PIN AE16   [get_ports {FMC_LA_P[5]   }];
set_property PACKAGE_PIN AH13   [get_ports {FMC_LA_N[9]   }];
set_property PACKAGE_PIN AH14   [get_ports {FMC_LA_P[9]   }];
set_property PACKAGE_PIN AJ13   [get_ports {FMC_LA_N[13]  }];
set_property PACKAGE_PIN AJ14   [get_ports {FMC_LA_P[13]  }];
set_property PACKAGE_PIN AK20   [get_ports {FMC_LA_N[23]  }];
set_property PACKAGE_PIN AJ20   [get_ports {FMC_LA_P[23]  }];
set_property PACKAGE_PIN AJ24   [get_ports {FMC_LA_N[26]  }];
set_property PACKAGE_PIN AJ23   [get_ports {FMC_LA_P[26]  }];
set_property PACKAGE_PIN AH21   [get_ports {FMC_LA_N[17]  }];
set_property PACKAGE_PIN AG21   [get_ports {FMC_LA_P[17]  }];
set_property PACKAGE_PIN AF22   [get_ports {FMC_LA_N[18]  }];
set_property PACKAGE_PIN AE22   [get_ports {FMC_LA_P[18]  }];
set_property PACKAGE_PIN AD13   [get_ports {FMC_LA_N[6]   }];
set_property PACKAGE_PIN AD14   [get_ports {FMC_LA_P[6]   }];
set_property PACKAGE_PIN AH12   [get_ports {FMC_LA_N[10]  }];
set_property PACKAGE_PIN AG12   [get_ports {FMC_LA_P[10]  }];
set_property PACKAGE_PIN AK15   [get_ports {FMC_LA_N[14]  }];
set_property PACKAGE_PIN AJ15   [get_ports {FMC_LA_P[14]  }];
set_property PACKAGE_PIN AH24   [get_ports {FMC_LA_N[27]  }];
set_property PACKAGE_PIN AH23   [get_ports {FMC_LA_P[27]  }];
set_property PACKAGE_PIN AD28   [get_ports {FMC_HA_N[0]   }];
set_property PACKAGE_PIN AC28   [get_ports {FMC_HA_P[0]   }];
set_property PACKAGE_PIN AC27   [get_ports {FMC_HA_N[1]   }];
set_property PACKAGE_PIN AB27   [get_ports {FMC_HA_P[1]   }];
set_property PACKAGE_PIN AA28   [get_ports {FMC_HA_N[2]   }];
set_property PACKAGE_PIN AA27   [get_ports {FMC_HA_P[2]   }];
set_property PACKAGE_PIN AA30   [get_ports {FMC_HA_N[3]   }];
set_property PACKAGE_PIN Y30    [get_ports {FMC_HA_P[3]   }];
set_property PACKAGE_PIN AA29   [get_ports {FMC_HA_N[4]   }];
set_property PACKAGE_PIN Y28    [get_ports {FMC_HA_P[4]   }];
set_property PACKAGE_PIN Y27    [get_ports {FMC_HA_N[5]   }];
set_property PACKAGE_PIN Y26    [get_ports {FMC_HA_P[5]   }];
set_property PACKAGE_PIN AK23   [get_ports {FMC_HA_N[6]   }];
set_property PACKAGE_PIN AK22   [get_ports {FMC_HA_P[6]   }];
set_property PACKAGE_PIN AD26   [get_ports {FMC_HA_N[7]   }];
set_property PACKAGE_PIN AC26   [get_ports {FMC_HA_P[7]   }];
set_property PACKAGE_PIN AD29   [get_ports {FMC_HA_N[8]   }];
set_property PACKAGE_PIN AC29   [get_ports {FMC_HA_P[8]   }];
set_property PACKAGE_PIN AB30   [get_ports {FMC_HA_N[9]   }];
set_property PACKAGE_PIN AB29   [get_ports {FMC_HA_P[9]   }];
set_property PACKAGE_PIN AH27   [get_ports {FMC_HA_N[10]  }];
set_property PACKAGE_PIN AH26   [get_ports {FMC_HA_P[10]  }];
set_property PACKAGE_PIN AK26   [get_ports {FMC_HA_N[11]  }];
set_property PACKAGE_PIN AJ26   [get_ports {FMC_HA_P[11]  }];
set_property PACKAGE_PIN AF25   [get_ports {FMC_HA_N[12]  }];
set_property PACKAGE_PIN AE25   [get_ports {FMC_HA_P[12]  }];
set_property PACKAGE_PIN AE26   [get_ports {FMC_HA_N[13]  }];
set_property PACKAGE_PIN AD25   [get_ports {FMC_HA_P[13]  }];
set_property PACKAGE_PIN AG27   [get_ports {FMC_HA_N[14]  }];
set_property PACKAGE_PIN AG26   [get_ports {FMC_HA_P[14]  }];
set_property PACKAGE_PIN AJ29   [get_ports {FMC_HA_N[15]  }];
set_property PACKAGE_PIN AJ28   [get_ports {FMC_HA_P[15]  }];
set_property PACKAGE_PIN AK25   [get_ports {FMC_HA_N[16]  }];
set_property PACKAGE_PIN AJ25   [get_ports {FMC_HA_P[16]  }];
set_property PACKAGE_PIN AF28   [get_ports {FMC_HA_N[17]  }];
set_property PACKAGE_PIN AE28   [get_ports {FMC_HA_P[17]  }];
set_property PACKAGE_PIN AG29   [get_ports {FMC_HA_N[18]  }];
set_property PACKAGE_PIN AF29   [get_ports {FMC_HA_P[18]  }];
set_property PACKAGE_PIN AK30   [get_ports {FMC_HA_N[19]  }];
set_property PACKAGE_PIN AJ30   [get_ports {FMC_HA_P[19]  }];
set_property PACKAGE_PIN AK28   [get_ports {FMC_HA_N[20]  }];
set_property PACKAGE_PIN AK27   [get_ports {FMC_HA_P[20]  }];
set_property PACKAGE_PIN AG30   [get_ports {FMC_HA_N[21]  }];
set_property PACKAGE_PIN AF30   [get_ports {FMC_HA_P[21]  }];
set_property PACKAGE_PIN U27    [get_ports {FMC_HB_N[0]   }];
set_property PACKAGE_PIN U26    [get_ports {FMC_HB_P[0]   }];
# error in the manual for HB_P/N pins : 1->2 | 2->3 | ... | 6->1
set_property PACKAGE_PIN R26    [get_ports {FMC_HB_N[1]   }];
set_property PACKAGE_PIN R25    [get_ports {FMC_HB_P[1]   }];
set_property PACKAGE_PIN W26    [get_ports {FMC_HB_N[2]   }];
set_property PACKAGE_PIN W25    [get_ports {FMC_HB_P[2]   }];
set_property PACKAGE_PIN V24    [get_ports {FMC_HB_N[3]   }];
set_property PACKAGE_PIN U24    [get_ports {FMC_HB_P[3]   }];
set_property PACKAGE_PIN W24    [get_ports {FMC_HB_N[4]   }];
set_property PACKAGE_PIN V23    [get_ports {FMC_HB_P[4]   }];
set_property PACKAGE_PIN W28    [get_ports {FMC_HB_N[5]   }];
set_property PACKAGE_PIN V27    [get_ports {FMC_HB_P[5]   }];
set_property PACKAGE_PIN V26    [get_ports {FMC_HB_N[6]   }];
set_property PACKAGE_PIN U25    [get_ports {FMC_HB_P[6]   }];
set_property PACKAGE_PIN V29    [get_ports {FMC_HB_N[7]   }];
set_property PACKAGE_PIN V28    [get_ports {FMC_HB_P[7]   }];
set_property PACKAGE_PIN U30    [get_ports {FMC_HB_N[8]   }];
set_property PACKAGE_PIN T30    [get_ports {FMC_HB_P[8]   }];
set_property PACKAGE_PIN W30    [get_ports {FMC_HB_N[9]   }];
set_property PACKAGE_PIN W29    [get_ports {FMC_HB_P[9]   }];
set_property PACKAGE_PIN V22    [get_ports {FMC_HB_N[10]  }];
set_property PACKAGE_PIN U22    [get_ports {FMC_HB_P[10]  }];
set_property PACKAGE_PIN U29    [get_ports {FMC_HB_N[11]  }];
set_property PACKAGE_PIN T29    [get_ports {FMC_HB_P[11]  }];
set_property PACKAGE_PIN T23    [get_ports {FMC_HB_N[12]  }];
set_property PACKAGE_PIN T22    [get_ports {FMC_HB_P[12]  }];
set_property PACKAGE_PIN T25    [get_ports {FMC_HB_N[13]  }];
set_property PACKAGE_PIN T24    [get_ports {FMC_HB_P[13]  }];
set_property PACKAGE_PIN N27    [get_ports {FMC_HB_N[14]  }];
set_property PACKAGE_PIN N26    [get_ports {FMC_HB_P[14]  }];
set_property PACKAGE_PIN R23    [get_ports {FMC_HB_N[15]  }];
set_property PACKAGE_PIN R22    [get_ports {FMC_HB_P[15]  }];
set_property PACKAGE_PIN P26    [get_ports {FMC_HB_N[16]  }];
set_property PACKAGE_PIN P25    [get_ports {FMC_HB_P[16]  }];
set_property PACKAGE_PIN T27    [get_ports {FMC_HB_N[17]  }];
set_property PACKAGE_PIN R27    [get_ports {FMC_HB_P[17]  }];
set_property PACKAGE_PIN R30    [get_ports {FMC_HB_N[18]  }];
set_property PACKAGE_PIN P30    [get_ports {FMC_HB_P[18]  }];
set_property PACKAGE_PIN P24    [get_ports {FMC_HB_N[19]  }];
set_property PACKAGE_PIN P23    [get_ports {FMC_HB_P[19]  }];
set_property PACKAGE_PIN P28    [get_ports {FMC_HB_N[20]  }];
set_property PACKAGE_PIN N28    [get_ports {FMC_HB_P[20]  }];
set_property PACKAGE_PIN P29    [get_ports {FMC_HB_N[21]  }];
set_property PACKAGE_PIN N29    [get_ports {FMC_HB_P[21]  }];

# -------------------------------------------------------------------
# MGT REF CLKS 
# -------------------------------------------------------------------
# - Bank 109 & 110 -
# -------------------------------------------------------------------
# MGTREFCLK0 of bank 109, on FMC card
set_property PACKAGE_PIN AD9    [get_ports {FMC_CLK0_M2C_N}];
set_property PACKAGE_PIN AD10   [get_ports {FMC_CLK0_M2C_P}];
# MGTREFCLK0 of bank 110, on FMC card (not available on Techway FMC_SFP/+_104)
set_property PACKAGE_PIN AA7    [get_ports {FMC_CLK1_M2C_N}];
set_property PACKAGE_PIN AA8    [get_ports {FMC_CLK1_M2C_P}];

# MGTREFCLK1 of bank 109, 125 MHz
set_property PACKAGE_PIN AF10  [get_ports {GTXCLK0_P	  }];
set_property PACKAGE_PIN AF9   [get_ports {GTXCLK0_N	  }];

# MGTREFCLK1 of bank 110, 156.25 MHz
set_property PACKAGE_PIN AC8   [get_ports {GTXCLK1_P	  }];
set_property PACKAGE_PIN AC7   [get_ports {GTXCLK1_N	  }];

# -------------------------------------------------------------------
# - Bank 112 -
# -------------------------------------------------------------------
# MGTREFCLK0, 100MHz
set_property PACKAGE_PIN N8       [get_ports {AMC4_7_MGTREFCLK0_P	  }];
set_property PACKAGE_PIN N7       [get_ports {AMC4_7_MGTREFCLK0_N	  }];

# MGTREFCLK1, 156.25MHz
set_property PACKAGE_PIN R8       [get_ports {AMC4_7_MGTREFCLK1_P	  }];
set_property PACKAGE_PIN R7       [get_ports {AMC4_7_MGTREFCLK1_N	  }];

# -------------------------------------------------------------------
# - Bank 111 -
# -------------------------------------------------------------------
# MGTREFCLK0, AMC FCLKA pins
set_property PACKAGE_PIN U8       [get_ports {AMC8_11_MGTREFCLK0_P	  }];
set_property PACKAGE_PIN U7       [get_ports {AMC8_11_MGTREFCLK0_N	  }];

# MGTREFCLK1, 125MHz
set_property PACKAGE_PIN W8        [get_ports {AMC8_11_MGTREFCLK1_P	  }];
set_property PACKAGE_PIN W7        [get_ports {AMC8_11_MGTREFCLK1_N	  }];

# -------------------------------------------------------------------
# SFP TX Enable (always)
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# IOSTANDARD VCCOIO Constraints
# -------------------------------------------------------------------
# Set the bank voltage for IO Bank 34 to 1.8V by default.
#set_property IOSTANDARD LVCMOS18 [get_ports -of_objects [get_iobanks 34]];
# Set the bank voltage for IO Bank 35 to 1.8V by default.
#set_property IOSTANDARD LVCMOS18 [get_ports -of_objects [get_iobanks 35]];
# Set the bank voltage for IO Bank 13 to 3.3V by default.
#set_property IOSTANDARD LVCMOS33 [get_ports -of_objects [get_iobanks 13]];

# -------------------------------------------------------------------
# Override Differential Pairs' IOSTANDARD
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Pack fixed carrier board IO into IOBs (modules not included)
# -------------------------------------------------------------------
#set inputs [filter [all_inputs] {NAME =~ *TTL* || NAME =~ *LVDS* || NAME =~ *SPI* }]
#set outputs [filter [all_outputs] {NAME =~ *TTL* || NAME =~ *LVDS* || NAME =~ *SPI* }]
#set bidirs [filter [all_outputs] {NAME =~ *PAD_IO*}]

#set_property iob true $inputs
#set_property iob true $outputs
#set_property iob true $bidirs

# -------------------------------------------------------------------
# Enable on-chip pulldown for floating inputs
# -------------------------------------------------------------------
#set_property PULLTYPE PULLDOWN [get_ports TTLIN_PAD_I[*]]
#set_property PULLTYPE PULLDOWN [get_ports LVDSIN_PAD_I[*]]

# MGT_BANK_109
set FMC_HPC_GTX0_LOC  GTXE2_CHANNEL_X0Y0
set FMC_HPC_GTX1_LOC  GTXE2_CHANNEL_X0Y1
set FMC_HPC_GTX2_LOC  GTXE2_CHANNEL_X0Y2
set FMC_HPC_GTX3_LOC  GTXE2_CHANNEL_X0Y3

# MGT_BANK_112
set AMC_P4_GTX_LOC	  GTXE2_CHANNEL_X0Y15
set AMC_P5_GTX_LOC	  GTXE2_CHANNEL_X0Y14
set AMC_P6_GTX_LOC	  GTXE2_CHANNEL_X0Y13
set AMC_P7_GTX_LOC	  GTXE2_CHANNEL_X0Y12

# MGT_BANK_111
set AMC_P8_GTX_LOC	  GTXE2_CHANNEL_X0Y11
set AMC_P9_GTX_LOC	  GTXE2_CHANNEL_X0Y10
set AMC_P10_GTX_LOC	  GTXE2_CHANNEL_X0Y9
set AMC_P11_GTX_LOC	  GTXE2_CHANNEL_X0Y8
