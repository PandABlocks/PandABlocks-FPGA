# AUTOGENERATED

# All IP code required
{% for ip in ips %}
read_ip $IP_DIR/{{ ip }}/{{ ip }}.xci
{% endfor %}

# Module code and constraints
{% for block in fpga_blocks %}
    {# Soft block module code #}
    {% if block.type in "dma|soft|sfp|fmc|amc" 
	or "fmc" in block.type.split(' ') 
	or "amc" in block.type.split(' ')%}
add_files $TOP_DIR/{{ block.module_path }}/hdl/
    {% endif %}
    {# MGT pin constraints #}
    {% if block.otherconst == "mgt_pins" %}
        {% if block.interfaces %}
            {% if block.site%}
add_files $TARGET_DIR/const/{{block.type|upper}}{{ block.site }}_MGT_pins.xdc
            {% else %}
add_files $TARGET_DIR/const/{{block.type|upper}}_MGT_pins.xdc
            {% endif %}
        {% endif %}
        {% if block.type == "amc" %}
add_files $TARGET_DIR/const/AMC_MGT_pins.xdc
        {% endif %}
	{% if block.type == "fmc amc" or block.type == "amc fmc" %}
add_files $TARGET_DIR/const/FMC_MGT_pins.xdc 
add_files $TARGET_DIR/const/AMC_MGT_pins.xdc
	{% endif %}
    {% endif %}
    {# Module constraints #}
    {% for const in block.constraints %}
add_files $AUTOGEN/const/{{ block.name }}_{{ os.path.basename(const) }}
    {% endfor %}
{% endfor %}
